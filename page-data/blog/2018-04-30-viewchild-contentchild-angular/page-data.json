{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2018-04-30-viewchild-contentchild-angular/","result":{"data":{"site":{"siteMetadata":{"title":"Natalie's Blog"}},"markdownRemark":{"id":"6e668cd2-4a95-5097-8ba3-56209f5b33dd","excerpt":"ViewChild, ViewChildren, ContentChild, and ContentChildren are all decorators used to get access to elements, directives and/or components in the view DOM. Let…","html":"<p>ViewChild, ViewChildren, ContentChild, and ContentChildren are all decorators used to get access to elements, directives and/or components in the view DOM. Let’s break down why there are four decorators to do (seemingly) the similar tasks.</p>\n<h3>ViewChild</h3>\n<p>ViewChild is used to access to first element, component or directive matching the selector from the view DOM. The key here is it will only ever return one matched object even if multiple matching elements exist in the view DOM. If the view DOM changes and a new child matches the selector, the property will be updated. View queries are set before the AfterViewInit lifecycle hook, so if you are going to manipulate the ViewChild property in the component, it would be appropriate to do so from the ngAfterViewInit method.</p>\n<p>The ViewChild decorator takes a parameter we can use to specify the selector by:</p>\n<ul>\n<li>Type: Component or Directive class name (<span class=\"code\">@ViewChild(ExampleComponent)</span>)</li>\n<li>String: template variable reference (<span class=\"code\">@ViewChild(‘templateVarName’)</span>)</li>\n</ul>\n<p>The decorator also takes an optional second parameter which is an object with a single read property. We use this property if we want to read a different token from the queried elements. This is useful when we want to get the ViewContainerRef from a template in the view rather than the ComponentRef, TemplateRef or ElementRef.</p>\n<p>Below are some examples of how we would use these different methods in practice.</p>\n<p><div id=\"gist85348511\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-app-template-html\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-html \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-app-template-html-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-app-template-html-LC1\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">hello</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Jelly Donut<span class=\"pl-pds\">&quot;</span></span>&gt;&lt;/<span class=\"pl-ent\">hello</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-app-template-html-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-app-template-html-LC3\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">hello</span> <span class=\"pl-e\">name</span>=<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Old Fashioned Glazed<span class=\"pl-pds\">&quot;</span></span>&gt;&lt;/<span class=\"pl-ent\">hello</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-app-template-html-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-app-template-html-LC5\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">ng-container</span> <span class=\"pl-e\">#container</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-app-template-html-LC6\" class=\"blob-code blob-code-inner js-file-line\"> This is a container</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-app-template-html-LC7\" class=\"blob-code blob-code-inner js-file-line\">&lt;/<span class=\"pl-ent\">ng-container</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-app-template-html-LC8\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-app-template-html-LC9\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">ng-template</span> <span class=\"pl-e\">#template</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-app-template-html-LC10\" class=\"blob-code blob-code-inner js-file-line\"> This is a template</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-app-template-html-LC11\" class=\"blob-code blob-code-inner js-file-line\">&lt;/<span class=\"pl-ent\">ng-template</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-app-template-html-LC12\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-app-template-html-LC13\" class=\"blob-code blob-code-inner js-file-line\">&lt;<span class=\"pl-ent\">p</span> <span class=\"pl-e\">#element</span>&gt;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-app-template-html-LC14\" class=\"blob-code blob-code-inner js-file-line\"> This is an element</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-template-html-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-app-template-html-LC15\" class=\"blob-code blob-code-inner js-file-line\">&lt;/<span class=\"pl-ent\">p</span>&gt;</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/natmegs/7157815465d61e53aba75c214df81ab7/raw/146fb4d7da5d879160b2d2617fcda19a38bcffe9/app.template.html\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/natmegs/7157815465d61e53aba75c214df81ab7#file-app-template-html\">app.template.html</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p><div id=\"gist85348545\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-app-component-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-app-component-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-app-component-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"> @<span class=\"pl-en\">ViewChild</span>(<span class=\"pl-smi\">HelloComponent</span>) <span class=\"pl-en\">hello</span>: <span class=\"pl-smi\">HelloComponent</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-app-component-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\"> @<span class=\"pl-en\">ViewChild</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>template<span class=\"pl-pds\">&#39;</span></span>) <span class=\"pl-en\">template</span>: <span class=\"pl-smi\">TemplateRef</span><span class=\"pl-k\">&lt;</span><span class=\"pl-smi\">any</span><span class=\"pl-k\">&gt;</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-app-component-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"> @<span class=\"pl-en\">ViewChild</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>element<span class=\"pl-pds\">&#39;</span></span>) <span class=\"pl-en\">element</span>: <span class=\"pl-smi\">ElementRef</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-app-component-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\"> @<span class=\"pl-en\">ViewChild</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>container<span class=\"pl-pds\">&#39;</span></span>, { read: <span class=\"pl-smi\">ViewContainerRef</span> }) <span class=\"pl-en\">container</span>: <span class=\"pl-smi\">ViewContainerRef</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-app-component-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">   </td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-app-component-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\"> <span class=\"pl-en\">ngAfterViewInit</span>() {</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-app-component-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">   <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-c1\">this</span>.<span class=\"pl-smi\">hello</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-app-component-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">   <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-c1\">this</span>.<span class=\"pl-smi\">template</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-app-component-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">   <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-c1\">this</span>.<span class=\"pl-smi\">element</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-app-component-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">   <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-c1\">this</span>.<span class=\"pl-smi\">container</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-app-component-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\"> }</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/natmegs/677a1b212d22d751485774fb9b6a0d0a/raw/0f42bced513e327bbc787c1bf2dd50cee5b19417/app.component.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/natmegs/677a1b212d22d751485774fb9b6a0d0a#file-app-component-ts\">app.component.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<script src=\"https://gist.github.com/natmegs/7157815465d61e53aba75c214df81ab7.js\"></script>\n<script src=\"https://gist.github.com/natmegs/677a1b212d22d751485774fb9b6a0d0a.js\"></script>\n<p>Since we have two HelloComponents in the template, the logging statement will print out the information for the first HelloComponent (with name Jelly Donut), since the ViewChild will look for the first matching selector.</p>\n<h3>ViewChildren</h3>\n<p>ViewChildren works the exact same way as ViewChild, except it returns a QueryList of all elements or directives that match the given selector, instead of just the first match. Similarly to ViewChild, if the view DOM changes and new children match the given selector, the property will be updated.</p>\n<p>If we have a simple <span class=\"code\">HelloComponent</span> that is used multiple times in a view (ie the same view as the last example), we can target either the first instance or all instances via ViewChild and ViewChildren.</p>\n<p><div id=\"gist85348605\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-app-component-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-app-component-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-app-component-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\">@<span class=\"pl-en\">ViewChild</span>(<span class=\"pl-smi\">HelloComponent</span>) <span class=\"pl-en\">hello</span>: <span class=\"pl-smi\">HelloComponent</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-app-component-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">@<span class=\"pl-en\">ViewChildren</span>(<span class=\"pl-smi\">HelloComponent</span>) <span class=\"pl-en\">hellos</span>: <span class=\"pl-smi\">QueryList</span><span class=\"pl-k\">&lt;</span><span class=\"pl-smi\">HelloComponent</span><span class=\"pl-k\">&gt;</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-app-component-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-app-component-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-en\">ngAfterViewInit</span>() {</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-app-component-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\"> <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-c1\">this</span>.<span class=\"pl-smi\">hello</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-app-component-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\"> <span class=\"pl-c1\">console</span>.<span class=\"pl-c1\">log</span>(<span class=\"pl-c1\">this</span>.<span class=\"pl-smi\">hellos</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-app-component-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-app-component-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/natmegs/fc44743fd4ba73af68aa1459f2cad7da/raw/992f8c91d4e9e30b53143e480b4124daedfa537e/app.component.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/natmegs/fc44743fd4ba73af68aa1459f2cad7da#file-app-component-ts\">app.component.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<script src=\"https://gist.github.com/natmegs/fc44743fd4ba73af68aa1459f2cad7da.js\"></script>\n<h3>ContentChild and ContentChildren</h3>\n<p>ContentChild and ContentChildren work the same way as ViewChild and ViewChildren, but instead of querying the view DOM, they query the content DOM. We use these decorators when we want to access an element added to the component through an ngContent projection. Content queries are set before the AfterContentInit lifecycle hook.</p>\n<h3>QueryList</h3>\n<p>Since ViewChildren and ContentChildren return a QueryList of a specified type, it’s helpful to know some of the properties that exist on the QueryList type. The QueryList is an unmodifiable, iterable list of items that Angular keeps up to date whenever state changes (ie a fancy array). QueryList contains a changes Observable that can be subscribed to to be notified of any changes to the QueryList.</p>\n<p>Some properties that can be accessed on a QueryList<T>:</p>\n<ul>\n<li>dirty: boolean</li>\n<li>changes: Observable<any></li>\n<li>length: number</li>\n<li>first: T</li>\n<li>last: T</li>\n</ul>\n<p>And some methods available on a QueryList<T>:</p>\n<ul>\n<li>toArray(): T[]</li>\n<li>toString(): string</li>\n<li>reset(res: Array&#x3C;T | any[]>): void</li>\n<li>notifyOnChanges(): void</li>\n<li>setDirty(): void</li>\n<li>destroy(): void</li>\n</ul>\n<p>QueryList also implements its own (or similar) versions of many array methods.</p>","frontmatter":{"title":"ViewChild(ren) and ContentChild(ren) in Angular","date":"April 30, 2018","description":"Similarities and differences between four Angular decorators."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2018-04-30-viewchild-contentchild-angular/","previous":{"fields":{"slug":"/blog/2017-12-20-dynamic-components-angular/"},"frontmatter":{"title":"Dynamic Components in Angular"}},"next":{"fields":{"slug":"/blog/2018-05-01-ngtemplate-ngcontainer-ngcontent/"},"frontmatter":{"title":"ng-template, ng-container, and ng-content in Angular"}}}}}